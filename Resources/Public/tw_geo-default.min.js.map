{"version":3,"sources":["Resources/Public/Elements/Form.default.min.js"],"names":["d","Geoselect","elements","this","slice","call","map","e","GeoselectElement","container","id","search","getElementById","latLon","position","submit","initAutocomplete","initMap","onInitialize","prototype","hasAttribute","getAttribute","searchAutocomplete","google","maps","places","Autocomplete","componentRestrictions","country","String","split","item","trim","addListener","handle_autocompletePlaceChanged","bind","el","tagName","parentElement","toLowerCase","toUpperCase","findAncenstorByTagName","addEventListener","event","currentTarget","classList","add","activeElement","preventDefault","value","reset","defaultStyles","featureType","elementType","stylers","color","mapElement","attributes","Map","zoom","center","lat","Number","length","lng","streetViewControl","rotateControl","fullscreenControl","zoomControl","mapTypeControl","zoomControlOptions","ControlPosition","LEFT_TOP","styles","window","googleMapStyles","parentNode","removeChild","geoselect","dispatchEvent","CustomEvent","place","getPlace","geometry","removeAttribute","latitude","location","longitude","setAttribute","setLatLon","markerIconPath","console","log","marker","setPosition","getDiv","Marker","icon","url","size","Size","scaledSize","anchor","Point","setCenter","setZoom","detail","setMap","addMyLocationControl","navigator","geolocation","controlDiv","createElement","innerHTML","index","getCurrentPosition","coords","controls","RIGHT_BOTTOM","push","geoselectElements","querySelectorAll","document"],"mappings":"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","file":"tw_geo-default.min.js","sourcesContent":["!function(i){function n(t){this.elements=[].slice.call(t).map(function(t){return new o(t)})}function o(t){return this.container=t||null,this.container&&this.container.id?(this.search=i.getElementById(this.container.id+\"-search\"),this.latLon=i.getElementById(this.container.id+\"-lat-lon\"),this.search&&this.latLon?(this.position=i.getElementById(this.container.id+\"-position\"),this.submit=i.getElementById(this.container.id+\"-submit\"),this.initAutocomplete(),this.map=this.initMap(),void this.onInitialize()):null):null}o.prototype.initAutocomplete=function(){if(this.search.hasAttribute(\"autocomplete\")&&\"off\"===this.search.getAttribute(\"autocomplete\"))return null;this.searchAutocomplete=new google.maps.places.Autocomplete(this.search,{componentRestrictions:{country:this.container.hasAttribute(\"data-restrict-countries\")?String(this.container.getAttribute(\"data-restrict-countries\")).split(\",\").map(function(t){return t.trim()}):[]}}),this.searchAutocomplete.addListener(\"place_changed\",this.handle_autocompletePlaceChanged.bind(this)),function(t,e){for(;(t=t.parentElement)&&t.tagName!=e.toLowerCase()&&t.tagName!=e.toUpperCase(););return t}(this.search,\"form\").addEventListener(\"submit\",function(t){t.currentTarget.classList.add(\"loading\"),i.activeElement==this.search&&t.preventDefault()}.bind(this)),this.search.addEventListener(\"change\",function(t){t.currentTarget.value||this.reset()}.bind(this))},o.defaultStyles=[{featureType:\"poi\",elementType:\"labels.icon\",stylers:[{color:\"#9d9d9d\"}]},{featureType:\"poi\",elementType:\"labels.text.fill\",stylers:[{color:\"#9d9d9d\"}]}],o.prototype.initMap=function(){var t=i.getElementById(this.container.id+\"-map\");if(!t)return null;var e=this.container.hasAttribute(\"data-lat-lon\")?this.container.attributes[\"data-lat-lon\"].value.split(\",\"):[];return new google.maps.Map(t,{zoom:12,center:{lat:Number(2===e.length?e[0]:t.attributes[\"data-latitude\"].value),lng:Number(2===e.length?e[1]:t.attributes[\"data-longitude\"].value)},streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,zoomControl:!1,mapTypeControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},styles:window.googleMapStyles||o.defaultStyles})},o.prototype.onInitialize=function(){this.position&&this.position.parentNode.removeChild(this.position),this.container.classList.add(\"Geoselect--js\"),(this.container.geoselect=this).container.dispatchEvent(new CustomEvent(\"geoselect_init\"))},o.prototype.handle_autocompletePlaceChanged=function(t){var e=this.searchAutocomplete.getPlace();if(!e||!e.geometry)return this.container.removeAttribute(\"data-lat-lon\"),null;var i=e.geometry.location.lat(),e=e.geometry.location.lng();this.container.setAttribute(\"data-lat-lon\",i+\",\"+e),this.setLatLon(i,e)},o.prototype.setLatLon=function(t,e){var i;console.log(\"scripts.js - setLatLon\"),this.latLon.value=t+\",\"+e,this.map&&(this.marker?this.marker.setPosition({lat:t,lng:e}):(i=(i=this.map.getDiv().attributes[\"data-marker\"])?i.value:null,this.marker=new google.maps.Marker({position:{lat:t,lng:e},map:this.map,icon:i?{url:i,size:new google.maps.Size(48,68),scaledSize:new google.maps.Size(32,45),anchor:new google.maps.Point(12,34)}:null})),this.map.setCenter({lat:t,lng:e}),this.map.setZoom(12)),this.container.dispatchEvent(new CustomEvent(\"geoselect_change\",{detail:{latitude:t,longitude:e}}))},o.prototype.reset=function(){var t;this.marker&&(this.marker.setMap(null),this.marker=null,t=i.getElementById(this.container.id+\"-map\"),this.map.setCenter({lat:Number(t.attributes[\"data-latitude\"].value),lng:Number(t.attributes[\"data-longitude\"].value)})),this.map.setZoom(6),this.latLon.value&&(this.latLon.value=\"\"),this.search.value&&(this.search.value=\"\"),this.container.removeAttribute(\"data-lat-lon\"),this.container.dispatchEvent(new CustomEvent(\"geoselect_change\",{detail:{}}))},o.prototype.addMyLocationControl=function(){if(!navigator.geolocation)return!1;var t=i.createElement(\"div\");t.innerHTML=i.getElementById(\"GoogleMap-MyLocation\").innerHTML,t.index=1,t.addEventListener(\"click\",function(t){navigator.geolocation.getCurrentPosition(function(t){this.setLatLon(t.coords.latitude,t.coords.longitude),this.search.value=t.coords.latitude+\",\"+t.coords.longitude,this.map.setZoom(14)}.bind(this))}.bind(this)),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(t)},i.addEventListener(\"DOMContentLoaded\",function(t){var e=i.querySelectorAll(\".Geoselect\");e.length&&new n(e)})}(document);"]}