{"version":3,"sources":["Resources/Public/Elements/Form.default.min.js"],"names":["d","Geoselect","elements","this","slice","call","map","e","GeoselectElement","container","id","search","getElementById","latLon","position","submit","initAutocomplete","initMap","onInitialize","prototype","hasAttribute","getAttribute","searchAutocomplete","google","maps","places","Autocomplete","componentRestrictions","country","String","split","item","trim","addListener","handle_autocompletePlaceChanged","bind","el","tagName","parentElement","toLowerCase","toUpperCase","findAncenstorByTagName","addEventListener","event","currentTarget","classList","add","activeElement","preventDefault","value","reset","defaultStyles","featureType","elementType","stylers","color","mapElement","attributes","Map","zoom","center","lat","Number","length","lng","streetViewControl","rotateControl","fullscreenControl","zoomControl","mapTypeControl","zoomControlOptions","ControlPosition","LEFT_TOP","styles","window","googleMapStyles","parentNode","removeChild","geoselect","dispatchEvent","CustomEvent","place","getPlace","geometry","removeAttribute","latitude","location","longitude","setAttribute","setLatLon","markerIconPath","marker","setPosition","getDiv","Marker","icon","url","size","Size","scaledSize","anchor","Point","setCenter","setZoom","detail","setMap","addMyLocationControl","navigator","geolocation","controlDiv","createElement","innerHTML","index","getCurrentPosition","coords","controls","RIGHT_BOTTOM","push","geoselectElements","querySelectorAll","document"],"mappings":"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","file":"tw_geo-default.min.js","sourcesContent":["!function(i){function n(t){this.elements=[].slice.call(t).map(function(t){return new o(t)})}function o(t){return this.container=t||null,this.container&&this.container.id?(this.search=i.getElementById(this.container.id+\"-search\"),this.latLon=i.getElementById(this.container.id+\"-lat-lon\"),this.search&&this.latLon?(this.position=i.getElementById(this.container.id+\"-position\"),this.submit=i.getElementById(this.container.id+\"-submit\"),this.initAutocomplete(),this.map=this.initMap(),void this.onInitialize()):null):null}o.prototype.initAutocomplete=function(){if(this.search.hasAttribute(\"autocomplete\")&&\"off\"===this.search.getAttribute(\"autocomplete\"))return null;this.searchAutocomplete=new google.maps.places.Autocomplete(this.search,{componentRestrictions:{country:this.container.hasAttribute(\"data-restrict-countries\")?String(this.container.getAttribute(\"data-restrict-countries\")).split(\",\").map(function(t){return t.trim()}):[]}}),this.searchAutocomplete.addListener(\"place_changed\",this.handle_autocompletePlaceChanged.bind(this)),function(t,e){for(;(t=t.parentElement)&&t.tagName!=e.toLowerCase()&&t.tagName!=e.toUpperCase(););return t}(this.search,\"form\").addEventListener(\"submit\",function(t){t.currentTarget.classList.add(\"loading\"),i.activeElement==this.search&&t.preventDefault()}.bind(this)),this.search.addEventListener(\"change\",function(t){t.currentTarget.value||this.reset()}.bind(this))},o.defaultStyles=[{featureType:\"poi\",elementType:\"labels.icon\",stylers:[{color:\"#9d9d9d\"}]},{featureType:\"poi\",elementType:\"labels.text.fill\",stylers:[{color:\"#9d9d9d\"}]}],o.prototype.initMap=function(){var t=i.getElementById(this.container.id+\"-map\");if(!t)return null;var e=this.container.hasAttribute(\"data-lat-lon\")?this.container.attributes[\"data-lat-lon\"].value.split(\",\"):[];return new google.maps.Map(t,{zoom:12,center:{lat:Number(2===e.length?e[0]:t.attributes[\"data-latitude\"].value),lng:Number(2===e.length?e[1]:t.attributes[\"data-longitude\"].value)},streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,zoomControl:!1,mapTypeControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},styles:window.googleMapStyles||o.defaultStyles})},o.prototype.onInitialize=function(){this.position&&this.position.parentNode.removeChild(this.position),this.container.classList.add(\"Geoselect--js\"),(this.container.geoselect=this).container.dispatchEvent(new CustomEvent(\"geoselect_init\"))},o.prototype.handle_autocompletePlaceChanged=function(t){var e=this.searchAutocomplete.getPlace();if(!e||!e.geometry)return this.container.removeAttribute(\"data-lat-lon\"),null;var i=e.geometry.location.lat(),e=e.geometry.location.lng();this.container.setAttribute(\"data-lat-lon\",i+\",\"+e),this.setLatLon(i,e)},o.prototype.setLatLon=function(t,e){var i;this.latLon.value=t+\",\"+e,this.map&&(this.marker?this.marker.setPosition({lat:t,lng:e}):(i=(i=this.map.getDiv().attributes[\"data-marker\"])?i.value:null,this.marker=new google.maps.Marker({position:{lat:t,lng:e},map:this.map,icon:i?{url:i,size:new google.maps.Size(48,68),scaledSize:new google.maps.Size(32,45),anchor:new google.maps.Point(12,34)}:null})),this.map.setCenter({lat:t,lng:e}),this.map.setZoom(12)),this.container.dispatchEvent(new CustomEvent(\"geoselect_change\",{detail:{latitude:t,longitude:e}}))},o.prototype.reset=function(){var t;this.marker&&(this.marker.setMap(null),this.marker=null,t=i.getElementById(this.container.id+\"-map\"),this.map.setCenter({lat:Number(t.attributes[\"data-latitude\"].value),lng:Number(t.attributes[\"data-longitude\"].value)})),this.map.setZoom(6),this.latLon.value&&(this.latLon.value=\"\"),this.search.value&&(this.search.value=\"\"),this.container.removeAttribute(\"data-lat-lon\"),this.container.dispatchEvent(new CustomEvent(\"geoselect_change\",{detail:{}}))},o.prototype.addMyLocationControl=function(){if(!navigator.geolocation)return!1;var t=i.createElement(\"div\");t.innerHTML=i.getElementById(\"GoogleMap-MyLocation\").innerHTML,t.index=1,t.addEventListener(\"click\",function(t){navigator.geolocation.getCurrentPosition(function(t){this.setLatLon(t.coords.latitude,t.coords.longitude),this.search.value=t.coords.latitude+\",\"+t.coords.longitude,this.map.setZoom(14)}.bind(this))}.bind(this)),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(t)},i.addEventListener(\"DOMContentLoaded\",function(t){var e=i.querySelectorAll(\".Geoselect\");e.length&&new n(e)})}(document);"]}